{"ast":null,"code":"import _asyncToGenerator from \"/home/rosantos/workspace/projetos/Sefaz-SE/fontes/demo-integration/demo-integration-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport function initializer(keycloak, loadConfigService) {\n  return () => {\n    return new Promise( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (resolve, reject) {\n        //serviço de configurações\n        yield loadConfigService.load(); //serviço do keycloak\n\n        try {\n          yield keycloak.init({\n            config: {\n              url: loadConfigService.settings.keycloakUrl,\n              realm: loadConfigService.settings.realm,\n              clientId: loadConfigService.settings.clientId\n            },\n            initOptions: {\n              onLoad: 'check-sso',\n              silentCheckSsoRedirectUri: window.location.origin + '/assets/silent-check-sso.html'\n            }\n          });\n          resolve(false);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  };\n}","map":{"version":3,"mappings":";AAIA,OAAM,SAAUA,WAAV,CAAsBC,QAAtB,EAAiDC,iBAAjD,EAAwF;EAC5F,OAAO,MAAmB;IACxB,OAAO,IAAIC,OAAJ;MAAA,6BAAY,WAAOC,OAAP,EAAgBC,MAAhB,EAA0B;QAE3C;QACA,MAAMH,iBAAiB,CAACI,IAAlB,EAAN,CAH2C,CAK3C;;QACA,IAAI;UACF,MAAML,QAAQ,CAACM,IAAT,CAAc;YAChBC,MAAM,EAAE;cACNC,GAAG,EAAEP,iBAAiB,CAACQ,QAAlB,CAA2BC,WAD1B;cAENC,KAAK,EAAEV,iBAAiB,CAACQ,QAAlB,CAA2BE,KAF5B;cAGNC,QAAQ,EAAEX,iBAAiB,CAACQ,QAAlB,CAA2BG;YAH/B,CADQ;YAMhBC,WAAW,EAAE;cACXC,MAAM,EAAE,WADG;cAEXC,yBAAyB,EACvBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAAyB;YAHhB;UANG,CAAd,CAAN;UAYAf,OAAO,CAAC,KAAD,CAAP;QACD,CAdD,CAcE,OAAOgB,KAAP,EAAc;UACdf,MAAM,CAACe,KAAD,CAAN;QACD;MACF,CAvBM;;MAAA;QAAA;MAAA;IAAA,IAAP;EAwBD,CAzBD;AA0BD","names":["initializer","keycloak","loadConfigService","Promise","resolve","reject","load","init","config","url","settings","keycloakUrl","realm","clientId","initOptions","onLoad","silentCheckSsoRedirectUri","window","location","origin","error"],"sourceRoot":"","sources":["/home/rosantos/workspace/projetos/Sefaz-SE/fontes/demo-integration/demo-integration-frontend/src/app/_utils/app-init.ts"],"sourcesContent":["import { KeycloakOptions, KeycloakService } from 'keycloak-angular';\nimport { ConfigurationsService } from '../_services/configurations.service';\n\n\nexport function initializer(keycloak: KeycloakService, loadConfigService:ConfigurationsService): () => Promise<any> {\n  return (): Promise<any> => {\n    return new Promise(async (resolve, reject) => {\n      \n      //serviço de configurações\n      await loadConfigService.load();\n\n      //serviço do keycloak\n      try {\n        await keycloak.init({\n            config: {\n              url: loadConfigService.settings.keycloakUrl,\n              realm: loadConfigService.settings.realm,\n              clientId: loadConfigService.settings.clientId,\n            },\n            initOptions: {\n              onLoad: 'check-sso',\n              silentCheckSsoRedirectUri:\n                window.location.origin + '/assets/silent-check-sso.html'\n            }\n          });\n        resolve(false);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}